import{a as ee}from"./chunk-NFSDIVT5.js";import{b as j,c as u,d as G,e as z,f as W,g as p,i as D,j as R,k as H,l as J,m as K,n as Q,o as X,p as Y,q as Z,r as $}from"./chunk-ZXS63FUJ.js";import{i as P,j as O,k as L,o as V,s as U}from"./chunk-XJVDUTBG.js";import{Ga as S,Ia as h,Ka as q,Ma as e,Na as r,Oa as C,P as I,Pa as x,Qa as T,Ra as N,Sa as b,Ta as w,U as F,Y as k,Ya as n,Za as y,_a as A,ab as g,bb as _,cb as f,ea as E,eb as B,fa as v,ua as a,va as M}from"./chunk-6IZXC2FC.js";var te=(()=>{let l=class l{constructor(o){this.http=o}getUsers(){return this.http.get(`${U.UrlUsers}/index`)}StoreUser(o){return this.http.post(`${U.UrlUsers}/store`,o)}putUser(o,s){return this.http.put(`${U.UrlUsers}/update/${s}`,o)}deleteUser(o){return this.http.delete(`${U.UrlUsers}/destroy/${o}`)}getUser(o){return this.http.get(`${U.UrlUsers}/show/${o}`)}};l.\u0275fac=function(s){return new(s||l)(F(V))},l.\u0275prov=I({token:l,factory:l.\u0275fac,providedIn:"root"});let m=l;return m})();function ne(m,l){if(m&1&&(e(0,"div",37),n(1),r()),m&2){let c=w();q(c.alert),a(),A(" ",c.errormsg,`
`)}}function oe(m,l){m&1&&(x(0),e(1,"tr")(2,"td",38),n(3,"No hay usuarios"),r()(),T())}function se(m,l){if(m&1){let c=N();x(0),e(1,"td"),n(2),r(),e(3,"td"),n(4),r(),e(5,"td"),n(6),r(),e(7,"td")(8,"button",39),b("click",function(){E(c);let s=w().$implicit,t=w();return v(t.editModal(s.id,s.name,s.email,s.status))}),C(9,"i",40),r(),e(10,"button",41),b("click",function(){E(c);let s=w().$implicit,t=w();return v(t.openModal(s.id))}),C(11,"i",42),r()(),T()}if(m&2){let c=w().$implicit;a(2),y(c.name),a(2),y(c.email),a(2),y(c.status==1?"Activo":"Inactivo")}}function ae(m,l){if(m&1&&(e(0,"tr"),S(1,se,12,3,"ng-container",17),r()),m&2){let c=l.$implicit,o=w();a(),h("ngIf",o.userfilter=="all"||o.userfilter=="active"&&c.status==1||o.userfilter=="inactive"&&c.status!=1)}}var fe=(()=>{let l=class l{constructor(o,s){this.usersService=o,this.messageService=s,this.id=0,this.isError=!1,this.alert="",this.errormsg="",this.userfilter="all",this.newUser={name:"",email:"",password:"",password_confirmation:"",status:1,rol_id:1},this.putUser={name:"",email:"",password:"",password_confirmation:"",status:1,rol_id:1},this.userForm=new W({name:new p("",[u.required]),email:new p("",[u.required]),password:new p("",[u.required]),password_confirmation:new p("",[u.required]),status:new p("",[u.required]),rol_id:new p("",[u.required])}),this.updateUser=new W({name:new p("",[u.required]),email:new p("",[u.required]),password:new p("",[u.required]),password_confirmation:new p("",[u.required]),status:new p("",[u.required]),rol_id:new p("",[u.required])}),this.users={data:[]}}ngOnInit(){this.usersService.getUsers().subscribe(o=>this.users=o),this.errormsg=this.messageService.getMessage(),this.errormsg=="Usuario Eliminado Correctamente"&&(this.isError=!0,this.alert="alert alert-success",setTimeout(()=>{this.isError=!1,this.alert="",this.errormsg=""},1e4)),this.errormsg=="Usuario Creado Correctamente"&&(this.isError=!0,this.alert="alert alert-success",setTimeout(()=>{this.isError=!1,this.alert="",this.errormsg=""},1e4)),this.errormsg=="Usuario Actualizado Correctamente"&&(this.isError=!0,this.alert="alert alert-success",setTimeout(()=>{this.isError=!1,this.alert="",this.errormsg=""},1e4))}get name(){return this.userForm.get("name")}get email(){return this.userForm.get("email")}get password(){return this.userForm.get("password")}get password_confirmation(){return this.userForm.get("password_confirmation")}get status(){return this.userForm.get("status")}get rol_id(){return this.userForm.get("rol_id")}createUser(){this.usersService.StoreUser(this.newUser).subscribe(o=>{console.log(o),this.messageService.setMessage("Usuario Creado Correctamente"),this.ngOnInit()})}deleteUser(o){this.usersService.deleteUser(o).subscribe(s=>{console.log(s),this.messageService.setMessage("Usuario Eliminado Correctamente"),this.ngOnInit()},s=>{this.isError=!0,this.errormsg=s.message,setTimeout(()=>{this.isError=!1},3e3)})}editUser(o){this.usersService.putUser(this.putUser,o).subscribe(s=>{this.messageService.setMessage("Usuario Actualizado Correctamente"),this.ngOnInit()})}openModal(o){this.id=o}editModal(o,s,t,d){this.id=o,this.putUser.name=s,this.putUser.email=t,this.putUser.status=d}filterUsers(o){this.userfilter=o}};l.\u0275fac=function(s){return new(s||l)(M(te),M($))},l.\u0275cmp=k({type:l,selectors:[["app-users"]],standalone:!0,features:[B],decls:108,vars:21,consts:[["role","alert",3,"class",4,"ngIf"],[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6","text-center"],[1,"card","border-primary","shadow"],[1,"card-body"],[1,"card-title","text-primary"],[1,"row"],[1,"col-md-12"],[1,"card","border","shadow"],["type","button","data-bs-toggle","modal","data-bs-target","#postUser",1,"btn","add"],[1,"bi","bi-person"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"table","table-striped"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"modalId","modalTitle"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","formControlName","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","id","email","name","email","formControlName","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","formControlName","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password_confirmation",1,"form-label"],["type","password","id","password_confirmation","name","password_confirmation","formControlName","password_confirmation","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","status",1,"form-label"],["id","status","name","status","formControlName","status","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","1"],["value","0"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary"],["role","alert"],["colspan","4",1,"text-center"],["type","button","data-bs-toggle","modal","data-bs-target","#putUser",1,"btn","btn-warning",3,"click"],[1,"bi","bi-pencil-fill"],["type","button","data-bs-toggle","modal","data-bs-target","#deleteUser",1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash-fill"]],template:function(s,t){s&1&&(S(0,ne,2,4,"div",0),e(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),n(7,"Usuarios"),r()()()()(),e(8,"div",1)(9,"div",7)(10,"div",8)(11,"div",9),C(12,"div",5),e(13,"div",7)(14,"div",8)(15,"button",10),C(16,"i",11),n(17," Agregar usuario "),r()()(),e(18,"div",12)(19,"button",13),b("click",function(){return t.filterUsers("all")}),n(20,"Todos"),r(),e(21,"button",14),b("click",function(){return t.filterUsers("active")}),n(22,"Activos"),r(),e(23,"button",15),b("click",function(){return t.filterUsers("inactive")}),n(24,"Inactivos"),r()(),e(25,"div",7)(26,"div",8)(27,"table",16)(28,"thead")(29,"tr")(30,"th"),n(31,"Nombre"),r(),e(32,"th"),n(33,"Email"),r(),e(34,"th"),n(35,"Status"),r(),e(36,"th"),n(37,"Actions"),r()()(),e(38,"tbody"),S(39,oe,4,0,"ng-container",17)(40,ae,2,1,"tr",18),r()()()()()()()(),e(41,"app-modal",19)(42,"p"),n(43,"\xBFEst\xE1s seguro de eliminar el usuario?"),r(),e(44,"button",20),b("click",function(){return t.deleteUser(t.id)}),n(45,"Eliminar"),r(),e(46,"button",21),n(47,"Cancelar"),r()(),e(48,"app-modal",19)(49,"form",22),b("ngSubmit",function(){return t.createUser()}),e(50,"div",23)(51,"label",24),n(52,"Nombre"),r(),e(53,"input",25),f("ngModelChange",function(i){return _(t.newUser.name,i)||(t.newUser.name=i),i}),r()(),e(54,"div",23)(55,"label",26),n(56,"Email"),r(),e(57,"input",27),f("ngModelChange",function(i){return _(t.newUser.email,i)||(t.newUser.email=i),i}),r()(),e(58,"div",23)(59,"label",28),n(60,"Contrase\xF1a"),r(),e(61,"input",29),f("ngModelChange",function(i){return _(t.newUser.password,i)||(t.newUser.password=i),i}),r()(),e(62,"div",23)(63,"label",30),n(64,"Confirmar contrase\xF1a"),r(),e(65,"input",31),f("ngModelChange",function(i){return _(t.newUser.password_confirmation,i)||(t.newUser.password_confirmation=i),i}),r()(),e(66,"div",23)(67,"label",32),n(68,"Status"),r(),e(69,"select",33),f("ngModelChange",function(i){return _(t.newUser.status,i)||(t.newUser.status=i),i}),e(70,"option",34),n(71,"Activo"),r(),e(72,"option",35),n(73,"Inactivo"),r()()(),e(74,"button",36),n(75,"Agregar"),r(),e(76,"button",21),n(77,"Cancelar"),r()()(),e(78,"app-modal",19)(79,"form",22),b("ngSubmit",function(){return t.editUser(t.id)}),e(80,"div",23)(81,"label",24),n(82,"Nombre"),r(),e(83,"input",25),f("ngModelChange",function(i){return _(t.putUser.name,i)||(t.putUser.name=i),i}),r()(),e(84,"div",23)(85,"label",26),n(86,"Email"),r(),e(87,"input",27),f("ngModelChange",function(i){return _(t.putUser.email,i)||(t.putUser.email=i),i}),r()(),e(88,"div",23)(89,"label",28),n(90,"Contrase\xF1a"),r(),e(91,"input",29),f("ngModelChange",function(i){return _(t.putUser.password,i)||(t.putUser.password=i),i}),r()(),e(92,"div",23)(93,"label",30),n(94,"Confirmar contrase\xF1a"),r(),e(95,"input",31),f("ngModelChange",function(i){return _(t.putUser.password_confirmation,i)||(t.putUser.password_confirmation=i),i}),r()(),e(96,"div",23)(97,"label",32),n(98,"Status"),r(),e(99,"select",33),f("ngModelChange",function(i){return _(t.putUser.status,i)||(t.putUser.status=i),i}),e(100,"option",34),n(101,"Activo"),r(),e(102,"option",35),n(103,"Inactivo"),r()()(),e(104,"button",36),n(105,"Editar"),r(),e(106,"button",21),n(107,"Cancelar"),r()()()()),s&2&&(h("ngIf",t.isError),a(39),h("ngIf",t.users.data.length===0),a(),h("ngForOf",t.users.data),a(),h("modalId","deleteUser")("modalTitle","Eliminar usuario"),a(7),h("modalId","postUser")("modalTitle","Agregar usuario"),a(),h("formGroup",t.userForm),a(4),g("ngModel",t.newUser.name),a(4),g("ngModel",t.newUser.email),a(4),g("ngModel",t.newUser.password),a(4),g("ngModel",t.newUser.password_confirmation),a(4),g("ngModel",t.newUser.status),a(9),h("modalId","putUser")("modalTitle","Editar usuario"),a(),h("formGroup",t.updateUser),a(4),g("ngModel",t.putUser.name),a(4),g("ngModel",t.putUser.email),a(4),g("ngModel",t.putUser.password),a(4),g("ngModel",t.putUser.password_confirmation),a(4),g("ngModel",t.putUser.status))},dependencies:[L,P,O,ee,Y,D,K,Q,j,J,G,z,X,Z,R,H],styles:[".add[_ngcontent-%COMP%]{margin:10px;padding:10px;border-radius:5px;background-color:#4caf50;color:#fff;border:none;cursor:pointer;font-size:20px}.border[_ngcontent-%COMP%]{margin:10px;padding:10px;border-radius:5px;background-color:#f2f2f2;color:#000;border:none;cursor:pointer;font-size:20px}"]});let m=l;return m})();export{fe as UsersComponent};
