import{a as S}from"./chunk-3NGIFNNN.js";import{d as y}from"./chunk-X6K6JCTU.js";import{b as I,c as f,d as P,e as E,f as F,g as M,i as T,j as N,k as O,p as G,q as L}from"./chunk-QMUPNAPL.js";import{j as w,k as C}from"./chunk-XJVDUTBG.js";import{Ga as m,Ia as p,Ma as t,Na as i,Oa as c,Sa as x,Ta as u,Y as h,Ya as n,Za as v,_a as b,eb as _,ua as s,va as g}from"./chunk-6IZXC2FC.js";function V(e,l){if(e&1&&(t(0,"div",23),n(1),i()),e&2){let o=u();s(),b(" ",o.msg,`
`)}}function q(e,l){e&1&&(t(0,"div"),n(1,"La contrase\xF1a es requerida"),i())}function D(e,l){e&1&&(t(0,"div"),n(1,"La contrase\xF1a debe tener al menos 8 caracteres"),i())}function j(e,l){e&1&&(t(0,"div"),n(1,"La contrase\xF1a debe ser alfanum\xE9rica"),i())}function A(e,l){if(e&1&&(t(0,"div",24),m(1,q,2,0,"div",25)(2,D,2,0,"div",25)(3,j,2,0,"div",25),i()),e&2){let o=u();s(),p("ngIf",o.password==null||o.password.errors==null?null:o.password.errors.required),s(),p("ngIf",o.password==null||o.password.errors==null?null:o.password.errors.minlength),s(),p("ngIf",o.password==null||o.password.errors==null?null:o.password.errors.pattern)}}function R(e,l){if(e&1&&(t(0,"p",26),n(1),i()),e&2){let o=u();s(),v(o.error)}}var Q=(()=>{let l=class l{get password(){return this.profile.get("password")}constructor(d,r){this.auth=d,this.router=r,this.name="",this.plants=0,this.error="",this.msg="",this.profile=new F({password:new M("",[f.required,f.minLength(8),f.pattern(/^[a-zA-Z0-9 ]*$/)])})}ngOnInit(){this.auth.me().subscribe(d=>{console.log(d),this.name=d.name,this.plants=d.plant_count},d=>{console.log(d)})}changepassword(){let d=this.profile.get("password")?.value;this.auth.changepassword({password:d}).subscribe(r=>{console.log("Response:",r),console.log(r),this.profile.get("password")?.reset(),this.msg=r.body,console.log(this.msg),setTimeout(()=>{this.msg=""},2e3)},r=>{console.log(r),this.error=r.error.errors.password})}get isProfileValid(){return this.profile.valid}};l.\u0275fac=function(r){return new(r||l)(g(S),g(y))},l.\u0275cmp=h({type:l,selectors:[["app-profile"]],standalone:!0,features:[_],decls:33,vars:7,consts:[["class","alert alert-success","role","alert",4,"ngIf"],[1,"profile-container"],[1,"profile-picture"],["src","../../assets/imagenes/gato.png","alt","Profile Picture"],[1,"profile-details"],["id","plant-count"],["id","change-password","data-bs-toggle","modal","data-bs-target","#CambiarContrase\xF1a"],["id","CambiarContrase\xF1a","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Ingresa tu contrase\xF1a","formControlName","password",1,"form-control"],["class","text-danger",4,"ngIf"],["style","color: red;",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary",3,"disabled"],["role","alert",1,"alert","alert-success"],[1,"text-danger"],[4,"ngIf"],[2,"color","red"]],template:function(r,a){r&1&&(m(0,V,2,1,"div",0),t(1,"div",1)(2,"div",2),c(3,"img",3),i(),t(4,"div",4)(5,"h2"),n(6),i(),t(7,"p"),n(8,"Plantas que tengo:"),t(9,"span",5),n(10),i()(),t(11,"button",6),n(12,"Cambiar Contrase\xF1a"),i()()(),t(13,"div",7)(14,"div",8)(15,"div",9)(16,"div",10)(17,"h1",11),n(18,"Cambia tu contrase\xF1a"),i(),c(19,"button",12),i(),t(20,"div",13)(21,"form",14),x("ngSubmit",function(){return a.changepassword()}),t(22,"div",15)(23,"label",16),n(24,"Contrase\xF1a"),i(),c(25,"input",17),m(26,A,4,3,"div",18)(27,R,2,1,"p",19),i(),t(28,"div",20)(29,"button",21),n(30,"Cerrar"),i(),t(31,"button",22),n(32,"Guardar cambios"),i()()()()()()()),r&2&&(p("ngIf",a.msg),s(6),v(a.name),s(4),b(" ",a.plants,""),s(11),p("formGroup",a.profile),s(5),p("ngIf",(a.password==null?null:a.password.invalid)&&((a.password==null?null:a.password.dirty)||(a.password==null?null:a.password.touched))),s(),p("ngIf",a.error),s(4),p("disabled",!a.isProfileValid))},dependencies:[G,T,I,P,E,L,N,O,C,w],styles:[".profile-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px}.profile-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover}.profile-details[_ngcontent-%COMP%]{margin-top:20px;text-align:center}#change-password[_ngcontent-%COMP%]{margin-top:10px;padding:10px 20px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;cursor:pointer}@media screen and (max-width: 600px){.profile-container[_ngcontent-%COMP%]{padding:10px}}"]});let e=l;return e})();export{Q as ProfileComponent};
