import{a as A}from"./chunk-SQOI43AL.js";import{d as P,e as x}from"./chunk-VAZ272IR.js";import{a as F,b as q,c as p,d as W,e as N,f as k,g as y,h as V,i as z,j as B,k as G,o as O,p as R,q as j,r as D}from"./chunk-QRH52RPE.js";import{j as L,k as I,r as T}from"./chunk-HX75HRTQ.js";import{Ga as u,Ia as l,Ka as S,Ma as n,Na as r,Sa as C,Ta as h,Y as E,Ya as s,_a as b,ab as f,bb as v,cb as _,eb as M,ua as o,va as w}from"./chunk-6IZXC2FC.js";function Z(i,a){if(i&1&&(n(0,"div",21),s(1),r()),i&2){let t=h();S(t.alert),o(),b(" ",t.errormsg,`
`)}}function H(i,a){i&1&&(n(0,"div"),s(1,"Email is required"),r())}function J(i,a){i&1&&(n(0,"div"),s(1,"Email must be a valid email address"),r())}function K(i,a){i&1&&(n(0,"div"),s(1,"Email must be a valid email address"),r())}function Q(i,a){if(i&1&&(n(0,"div",22),u(1,H,2,0,"div",23)(2,J,2,0,"div",23)(3,K,2,0,"div",23),r()),i&2){let t=h();o(),l("ngIf",t.email==null||t.email.errors==null?null:t.email.errors.required),o(),l("ngIf",t.email==null||t.email.errors==null?null:t.email.errors.email),o(),l("ngIf",t.email==null||t.email.errors==null?null:t.email.errors.pattern)}}function U(i,a){i&1&&(n(0,"div"),s(1,"Password is required"),r())}function X(i,a){i&1&&(n(0,"div"),s(1,"Password must be at least 8 characters"),r())}function Y(i,a){i&1&&(n(0,"div"),s(1,"Password must contain at least one letter and one number"),r())}function $(i,a){if(i&1&&(n(0,"div",22),u(1,U,2,0,"div",23)(2,X,2,0,"div",23)(3,Y,2,0,"div",23),r()),i&2){let t=h();o(),l("ngIf",t.password==null||t.password.errors==null?null:t.password.errors.required),o(),l("ngIf",t.password==null||t.password.errors==null?null:t.password.errors.minlength),o(),l("ngIf",t.password==null||t.password.errors==null?null:t.password.errors.pattern)}}function ee(i,a){i&1&&(n(0,"div"),s(1,"Codigo de autorizacion debe tener 6 caracteres"),r())}function ie(i,a){i&1&&(n(0,"div"),s(1,"Codigo de autorizacion es requerido"),r())}function te(i,a){if(i&1&&(n(0,"div",22),u(1,ee,2,0,"div",23)(2,ie,2,0,"div",23),r()),i&2){let t=h();o(),l("ngIf",t.code==null||t.code.errors==null?null:t.code.errors.minlength),o(),l("ngIf",t.code==null||t.code.errors==null?null:t.code.errors.required)}}var ge=(()=>{let a=class a{constructor(d,g,e){this.auth=d,this.router=g,this.msg=e,this.login={email:"",password:""},this.verify={email:"",password:"",code:null},this.isAuth=!1,this.errormsg="",this.isError=!1,this.alert="",this.message="",this.showPassword=!1,this.formlogin=new k({email:new y("",[p.required,p.email,p.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]),password:new y("",[p.required,p.minLength(8)]),code:new y("",[p.required,p.minLength(6)])})}ngOnInit(){this.message=this.msg.getMessage(),this.message!==""&&(this.isError=!0,this.errormsg=this.message,this.alert="alert alert-success",setTimeout(()=>{this.isError=!1,this.errormsg="",this.alert=""},1e4))}get email(){return this.formlogin.get("email")}get password(){return this.formlogin.get("password")}get code(){return this.formlogin.get("code")}togglePasswordVisibility(){this.showPassword=!this.showPassword}Onsubmit(){this.isAuth?(this.verify.email=this.login.email,this.verify.password=this.login.password,this.auth.verify(this.verify).subscribe(d=>{console.log(d),localStorage.setItem("token",d.access_token),this.router.navigate(["/home"])},d=>{console.log(d),this.isError=!0,this.errormsg=d.error,this.alert="alert alert-danger",setTimeout(()=>{this.isError=!1,this.errormsg="",this.alert=""},1e4)})):this.auth.login(this.login).subscribe(d=>{this.isAuth=!0,console.log(d),this.isError=!0,this.errormsg=d.msg,this.alert="alert alert-success",setTimeout(()=>{this.isError=!1,this.errormsg="",this.alert=""},1e4)},d=>{d.error==="La cuenta no ha sido activada o no existe"?(this.isError=!0,this.errormsg=d.error,this.alert="alert alert-danger",setTimeout(()=>{this.isError=!1,this.errormsg="",this.alert=""},1e4)):d.status===401&&(this.isError=!0,this.errormsg="Correo o contrase\xF1a incorrectos",this.alert="alert alert-danger",setTimeout(()=>{this.isError=!1,this.errormsg="",this.alert=""},1e4))})}};a.\u0275fac=function(g){return new(g||a)(w(A),w(P),w(D))},a.\u0275cmp=E({type:a,selectors:[["app-login"]],standalone:!0,features:[M],decls:36,vars:14,consts:[["role","alert",3,"class",4,"ngIf"],[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"card"],[1,"card-header","text-white","text-center"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3",3,"hidden"],["for","inputEmail",1,"form-label"],["type","email","id","inputEmail","formControlName","email","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],["for","inputPassword",1,"form-label"],["id","inputPassword","formControlName","password","name","password","required","",1,"form-control",3,"ngModelChange","type","ngModel"],["type","checkbox","id","showPassword",3,"change","ngModelChange","ngModel"],["for","showPassword",1,"form-label"],["for","code",1,"form-label"],["type","text","id","code","formControlName","code","name","code","placeholder","Ingresa el codigo","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","text-white","w-100"],[1,"card-footer","text-center"],["routerLink","/registro"],["role","alert"],[1,"text-danger"],[4,"ngIf"]],template:function(g,e){g&1&&(u(0,Z,2,4,"div",0),n(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3"),s(7,"Iniciar sesi\xF3n"),r()(),n(8,"div",6)(9,"form",7),C("ngSubmit",function(){return e.Onsubmit()}),n(10,"div",8)(11,"label",9),s(12,"Correo electr\xF3nico"),r(),n(13,"input",10),_("ngModelChange",function(m){return v(e.login.email,m)||(e.login.email=m),m}),r(),u(14,Q,4,3,"div",11),r(),n(15,"div",8)(16,"label",12),s(17,"Contrase\xF1a"),r(),n(18,"input",13),_("ngModelChange",function(m){return v(e.login.password,m)||(e.login.password=m),m}),r(),u(19,$,4,3,"div",11),r(),n(20,"div",8)(21,"input",14),C("change",function(){return e.togglePasswordVisibility()}),_("ngModelChange",function(m){return v(e.showPassword,m)||(e.showPassword=m),m}),r(),n(22,"label",15),s(23,"Mostrar contrase\xF1a"),r()(),n(24,"div",8)(25,"label",16),s(26,"Codigo de autorizacion"),r(),n(27,"input",17),_("ngModelChange",function(m){return v(e.verify.code,m)||(e.verify.code=m),m}),r(),u(28,te,3,2,"div",11),r(),n(29,"button",18),s(30,"Iniciar sesi\xF3n"),r()()(),n(31,"div",19)(32,"p"),s(33,"\xBFAun no tienes cuenta? "),n(34,"a",20),s(35,"Registrate"),r()()()()()()()),g&2&&(l("ngIf",e.isError),o(9),l("formGroup",e.formlogin),o(),l("hidden",e.isAuth),o(3),f("ngModel",e.login.email),o(),l("ngIf",(e.email==null?null:e.email.invalid)&&((e.email==null?null:e.email.dirty)||(e.email==null?null:e.email.touched))),o(),l("hidden",e.isAuth),o(3),l("type",e.showPassword?"text":"password"),f("ngModel",e.login.password),o(),l("ngIf",(e.password==null?null:e.password.invalid)&&((e.password==null?null:e.password.dirty)||(e.password==null?null:e.password.touched))),o(),l("hidden",e.isAuth),o(),f("ngModel",e.showPassword),o(3),l("hidden",!e.isAuth),o(3),f("ngModel",e.verify.code),o(),l("ngIf",(e.code==null?null:e.code.invalid)&&((e.code==null?null:e.code.dirty)||(e.code==null?null:e.code.touched))))},dependencies:[x,I,L,R,z,q,F,W,N,O,V,j,B,G,T],styles:[".card-header[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{background-color:#00c881}"]});let i=a;return i})();export{ge as LoginComponent};
