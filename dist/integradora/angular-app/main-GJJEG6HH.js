import{a as m}from"./chunk-JP6TAB37.js";import{a as V,c as z,d as p,e as H,f as U}from"./chunk-X6K6JCTU.js";import{j as O,k as B,p as D,q as N}from"./chunk-XJVDUTBG.js";import{Ga as k,Ia as b,La as R,Ma as a,Na as r,Oa as s,P as u,Ra as T,Sa as F,Ta as _,U as l,Y as A,Ya as c,ea as L,eb as I,fa as P,n as g,r as d,ua as h,va as w,y as v}from"./chunk-6IZXC2FC.js";var G=(t,e)=>{let f=localStorage.getItem("token"),o=t.headers;return f?o=o.set("Authorization","Bearer "+f):localStorage.getItem("token")&&(f=localStorage.getItem("token")),o=o.set("Content-Type","application/json"),t=t.clone({headers:o}),console.log(t.headers),e(t)};var x=(()=>{let e=class e{constructor(o,i){this.router=o,this.auth=i}canActivate(o,i){return this.auth.isauth().pipe(d(n=>n.status===200?!0:(n.status===401&&this.router.navigate(["/login"]),!1)),v(n=>(console.error(n),this.router.navigate(["/login"]),g(!1))))}};e.\u0275fac=function(i){return new(i||e)(l(p),l(m))},e.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var C=(()=>{let e=class e{constructor(o,i){this.router=o,this.auth=i}canActivate(o,i){return this.auth.checkActive().pipe(d(n=>n.body===1?!0:(n.body===0&&(localStorage.removeItem("token"),localStorage.removeItem("userEmail"),this.router.navigate(["/login"])),!1)),v(n=>(console.log(n),this.router.navigate(["/login"]),g(!1))))}};e.\u0275fac=function(i){return new(i||e)(l(p),l(m))},e.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var j=(()=>{let e=class e{constructor(o,i){this.router=o,this.auth=i}canActivate(o,i){return this.auth.checkRol().pipe(d(n=>n.body===2?!0:(n.body===1&&this.router.navigate(["/home"]),!1)))}};e.\u0275fac=function(i){return new(i||e)(l(p),l(m))},e.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var M=(()=>{let e=class e{constructor(o,i){this.router=o,this.auth=i}canActivate(o,i){return this.auth.isauth().pipe(d(n=>n.status===200?(this.router.navigate(["/home"]),!1):(n.status===401,!0)),v(n=>(console.error(n),g(!0))))}};e.\u0275fac=function(i){return new(i||e)(l(p),l(m))},e.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var J=[{path:"registro",loadComponent:()=>import("./chunk-VQVZYMGD.js").then(t=>t.RegistroComponent),canActivate:[M]},{path:"login",loadComponent:()=>import("./chunk-POGYEP6E.js").then(t=>t.LoginComponent),canActivate:[M]},{path:"about",loadComponent:()=>import("./chunk-VYPTAXO5.js").then(t=>t.AboutComponent)},{path:"home",loadComponent:()=>import("./chunk-HNO32DDH.js").then(t=>t.HomeComponent),canActivate:[C,x]},{path:"plants",loadComponent:()=>import("./chunk-YHSKCNQQ.js").then(t=>t.PlantsComponent),canActivate:[x,C]},{path:"plant/:id",loadComponent:()=>import("./chunk-SLUN3REY.js").then(t=>t.PlantComponent),canActivate:[x,C]},{path:"users",loadComponent:()=>import("./chunk-B3VDSZSX.js").then(t=>t.UsersComponent),canActivate:[x,C,j]},{path:"sensors",loadComponent:()=>import("./chunk-S7WPSRE3.js").then(t=>t.SensorsComponent),canActivate:[x,C,j]},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",loadComponent:()=>import("./chunk-IQAOTUHS.js").then(t=>t.NotFoundComponent)}];var K={providers:[U(J),D(N([G]))]};var Q=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=A({type:e,selectors:[["app-loading-screen"]],standalone:!0,features:[I],decls:2,vars:0,consts:[[1,"loading"],[1,"spinner"]],template:function(i,n){i&1&&(a(0,"div",0),s(1,"div",1),r())},styles:[".loading[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.3);border-top:4px solid #fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]});let t=e;return t})();function X(t,e){t&1&&(a(0,"li",13)(1,"button",14),s(2,"i",15),r()())}function Y(t,e){t&1&&(a(0,"div",16)(1,"a",17),c(2,"Iniciar sesion"),r(),s(3,"div",18),a(4,"a",19),c(5,"Registrarse"),r()())}function Z(t,e){if(t&1){let f=T();a(0,"div",16)(1,"a",20),c(2,"Perfil"),r(),s(3,"div",18),a(4,"a",21),F("click",function(){L(f);let i=_();return P(i.logout())}),c(5,"Cerrar sesion"),r()()}}function $(t,e){t&1&&(a(0,"tr")(1,"td")(2,"a",35),s(3,"i",36),c(4,"Usuarios"),r()()(),a(5,"tr")(6,"td")(7,"a",37),s(8,"i",38),c(9,"Sensores"),r()()())}function q(t,e){if(t&1&&(a(0,"div",22)(1,"div",23)(2,"h5",24),s(3,"img",3),c(4,"Men\xFA"),r(),s(5,"button",25),r(),a(6,"div",26)(7,"table",27)(8,"tbody")(9,"tr")(10,"td")(11,"a",28),s(12,"i",29),c(13,"Inicio"),r()()(),a(14,"tr")(15,"td"),s(16,"img",30),a(17,"a",31),s(18,"i",32),c(19,"Plantas"),r()()(),k(20,$,10,0),a(21,"tr")(22,"td")(23,"a",33),s(24,"i",34),c(25,"Acerca de"),r()()()()()()()),t&2){let f=_();h(20),R(20,f.rol==2?20:-1)}}function tt(t,e){t&1&&s(0,"app-loading-screen")}var W=(()=>{let e=class e{constructor(o,i){this.auth=o,this.route=i,this.title="integradora",this.isAuth=!1,this.isLoading=!1,this.rol=0,this.status=!1,this.route.events.subscribe(n=>{n.constructor.name==="NavigationEnd"&&(this.checkauth(),this.checkrol())})}ngOnInit(){this.checkauth(),this.checkrol(),this.checkstatus(),console.log(this.isAuth),console.log(this.rol)}checkauth(){this.auth.isauth().subscribe(o=>{console.log(o),this.isAuth=!0,console.log(o.status)},o=>{console.log(o),this.isAuth=!1})}checkrol(){this.auth.checkRol().subscribe(o=>{console.log(o),this.rol=o.body},o=>{console.log(o)})}checkstatus(){this.auth.checkActive().subscribe(o=>{console.log(o),this.status=o.body,this.status==!1&&this.route.navigate(["/login"])},o=>{console.log(o)})}logout(){this.auth.logout().subscribe(o=>{console.log(o),localStorage.removeItem("userName"),localStorage.removeItem("token"),this.isAuth=!1,this.route.navigate(["/login"])},o=>{console.log(o)})}};e.\u0275fac=function(i){return new(i||e)(w(m),w(p))},e.\u0275cmp=A({type:e,selectors:[["app-root"]],standalone:!0,features:[I],decls:16,vars:5,consts:[[1,"navbar","shadow"],[1,"container-fluid"],["href","#","data-bs-toggle","offcanvas","data-bs-target","#offcanvasExample","aria-controls","offcanvasExample",1,"navbar-brand"],["src","../assets/imagenes/icon.png","alt","",1,"icon"],["href","#",1,"navbar-brand"],[1,"navbar","me-auto","mb-2","mb-lg-0"],["class","navbar-item",4,"ngIf"],[1,"dropdown"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-principal","dropdown-toggle"],[1,"bi","bi-person-circle"],["class","dropdown-menu dropdown-menu-end","aria-labelledby","dropdownMenuButton1",4,"ngIf"],["class","offcanvas offcanvas-start","tabindex","-1","id","offcanvasExample","aria-labelledby","offcanvasExampleLabel",4,"ngIf"],[4,"ngIf"],[1,"navbar-item"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasExample",1,"btn","btn-principal"],[1,"bi","bi-list"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu","dropdown-menu-end"],["routerLink","/login",1,"dropdown-item"],[1,"dropdown-divider"],["routerLink","/registro",1,"dropdown-item"],["routerLink","/perfil",1,"dropdown-item"],[1,"dropdown-item",3,"click"],["tabindex","-1","id","offcanvasExample","aria-labelledby","offcanvasExampleLabel",1,"offcanvas","offcanvas-start"],[1,"offcanvas-header"],["id","offcanvasExampleLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","text-reset"],[1,"offcanvas-body","d-flex","bg-dark"],[1,"table","table-dark","fs-3"],["routerLink","/home"],[1,"bi","bi-house-door","me-2"],["src","../assets/imagenes/iconbw.png","alt","",1,"iconplanta"],["routerLink","/plants"],[1,"bi","bi-leaf","me-2"],["routerLink","/about"],[1,"bi","bi-info-circle","me-2"],["routerLink","/users"],[1,"bi","bi-person","me-2"],["routerLink","/sensors"],[1,"bi","bi-cpu-fill","me-2"]],template:function(i,n){i&1&&(a(0,"nav",0)(1,"div",1)(2,"a",2),s(3,"img",3),r(),a(4,"a",4),c(5,"Life plants"),r(),a(6,"ul",5),k(7,X,3,0,"li",6),r(),a(8,"div",7)(9,"button",8),s(10,"i",9),r(),k(11,Y,6,0,"div",10)(12,Z,6,0,"div",10),r()()(),k(13,q,26,1,"div",11)(14,tt,1,0,"app-loading-screen",12),s(15,"router-outlet")),i&2&&(h(7),b("ngIf",n.isAuth&&n.status),h(4),b("ngIf",!n.isAuth),h(),b("ngIf",n.isAuth),h(),b("ngIf",n.isAuth&&n.status),h(),b("ngIf",n.isLoading))},dependencies:[z,H,B,O,Q],styles:[".btn-principal[_ngcontent-%COMP%]{background-color:#743c07;color:#fff;border:none;padding:10px 20px;cursor:pointer;border-radius:5px}.offcanvas-body[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.iconplanta[_ngcontent-%COMP%]{width:29px;height:35px;filter:invert(1)}"]});let t=e;return t})();V(W,K).catch(t=>console.error(t));
